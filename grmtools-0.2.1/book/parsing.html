<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Parsing - grmtools</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> grmtools</a></li><li class="chapter-item expanded "><a href="quickstart.html"><strong aria-hidden="true">2.</strong> Quickstart Guide</a></li><li class="chapter-item expanded "><a href="lexing.html"><strong aria-hidden="true">3.</strong> Lexing</a></li><li class="chapter-item expanded "><a href="parsing.html" class="active"><strong aria-hidden="true">4.</strong> Parsing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="parsing_idioms.html"><strong aria-hidden="true">4.1.</strong> grmtools parsing idioms</a></li></ol></li><li class="chapter-item expanded "><a href="libsandtools.html"><strong aria-hidden="true">5.</strong> The individual libraries and tools</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="lrpar.html"><strong aria-hidden="true">5.1.</strong> lrpar</a></li><li class="chapter-item expanded "><a href="lrlex.html"><strong aria-hidden="true">5.2.</strong> lrlex</a></li><li class="chapter-item expanded "><a href="nimbleparse.html"><strong aria-hidden="true">5.3.</strong> nimbleparse</a></li><li class="chapter-item expanded "><a href="cfgrammar.html"><strong aria-hidden="true">5.4.</strong> cfgrammar</a></li><li class="chapter-item expanded "><a href="lrtable.html"><strong aria-hidden="true">5.5.</strong> lrtable</a></li></ol></li><li class="chapter-item expanded "><a href="errorrecovery.html"><strong aria-hidden="true">6.</strong> Error recovery</a></li><li class="chapter-item expanded "><a href="othertools.html"><strong aria-hidden="true">7.</strong> Other Rust parsing tools</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">grmtools</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#parsing" id="parsing">Parsing</a></h1>
<p>Parsing is the act of checking whether a stream of lexemes match a grammar.
Since a simple &quot;yes/no&quot; answer is rarely useful, it is common to execute
user-defined <em>actions</em> during parsing.</p>
<p><code>grmtools</code> contains libraries (<a href="cfgrammar.html"><code>cfgrammar</code></a> and
<a href="lrtable.html"><code>lrtable</code></a>) which allow users to build their own LR parsers in
whatever fashion they want. However, for 99% of cases, the <a href="lrpar.html"><code>lrpar</code></a>
library is what users want and need: a (largely) Yacc-compatible parser. Roughly
speaking, the core parts of grammars work identically in Yacc and <code>lrpar</code>, but
some other parts of the system have been modernised (e.g. to avoid the use of
global variables) and given a more idiomatic Rust feel. Notably, <code>lrpar</code> is
built from the ground-up to have a powerful, flexible approach to <a href="errorrecovery.html">error
recovery</a>.</p>
<h2><a class="header" href="#yacc-variants" id="yacc-variants">Yacc variants</a></h2>
<p>grmtools can deal with several different variants of Yacc input.</p>
<h3><a class="header" href="#grmtools" id="grmtools">Grmtools</a></h3>
<p><code>YaccKind::Grmtools</code> is grmtools own variant of Yacc syntax. The sole difference
is that rules have a Rust type to which all their production's actions must adhere
to. Consider the following snippet:</p>
<pre><code>R -&gt; Result&lt;i32, ()&gt;:
     'a' { Ok(5) }
   | 'b' { Err(()) }
</code></pre>
<p>Here the rule <code>R</code> has a Rust return type of <code>Result&lt;X, ()&gt;</code> (between <code>-&gt;</code> and
<code>:</code>). Both of its productions adhere to this type, the first by instantiating
<code>Ok(5)</code> and the second <code>Err(())</code>.</p>
<h3><a class="header" href="#original-yacc" id="original-yacc">“Original” Yacc</a></h3>
<p>Although the name is not fully accurate (grmtools supports a slightly disjoint
subset of original Yacc's input), this mode allows users to most easily test
externally created Yacc files. Several sub-variants are allowed:</p>
<ul>
<li>
<p><code>YaccKind::Original(YaccOriginalActionKind::GenericParseTree)</code> does not
execute user actions, but instead creates a generic parse tree, where elements
are instances of the <code>lrpar::parser::Node</code> enum. This is useful for quickly
testing whether a parser is accepting the intended language.</p>
</li>
<li>
<p><code>YaccKind::Original(YaccOriginalActionKind::NoActions)</code> parses input and
reports errors but does not execute any user actions. This is useful if you
are trying to test a large corpus of input for correctness.</p>
</li>
<li>
<p><code>YaccKind::Original(YaccOriginalActionKind::UserAction)</code> models original Yacc
most closely but, in a Rust setting, is probably of little use beyond simple
calculator like languages. Instead of Yacc's <code>%union</code> directive, users can
specify <code>%actiontype</code> which is a Rust type which all production actions must
return an instance of. Unless all actions happen to naturally return the same
type, this quickly becomes cumbersome to use. For most use cases,
<code>YaccKind::Grmtools</code> is a superior alternative.</p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="lexing.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="parsing_idioms.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="lexing.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="parsing_idioms.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
